<!doctype html><html lang=ko dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>가상 면접 사례로 배우는 대규모 시스템 설계 기초를 읽고 | Halog</title><meta name=keywords content=","><meta name=description content="대규모 시스템 설계를 해본적이 없으니.. 궁금해서 해당 책을 읽어봤습니다.
책의 전반적인 내용은 어렵지 않습니다. 왜냐하면 내용이 깊게 들어가지 않고 말그대로 설계를 하기 때문에 생각보다 읽는데는 쉽다고 느껴졌습니다.
깊게 들어가면 어렵겠지만 책에서는 아주 깊게 들어가지는 않은 것 같아요.
책의 챕터는 12장 정도로 돼어 있으며, 챕터마다 설계해야 하는 서비스가 다릅니다.
책의 내용은 가상 면접을 하는 것처럼 면접관이 프로젝트에 대해 설계를 요청하면, 면접자는 해당 프로젝트의 서비스의 목적과 규모 등에 맞게 질문과 답변을 하는 방식입니다."><meta name=author content><link rel=canonical href=https://haservi.github.io/posts/books/large-scale-system-design-learned-from-virtual-interviews/><meta name=google-site-verification content="G-MXZP81P04W"><link rel=stylesheet as=style crossorigin href=https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.6/dist/web/static/pretendard.css><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://haservi.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://haservi.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://haservi.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://haservi.github.io/apple-touch-icon.png><link rel=mask-icon href=https://haservi.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1400973749140762" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RP5NDCM8J9"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-RP5NDCM8J9",{anonymize_ip:!1})}</script><meta property="og:title" content="가상 면접 사례로 배우는 대규모 시스템 설계 기초를 읽고"><meta property="og:description" content="대규모 시스템 설계를 해본적이 없으니.. 궁금해서 해당 책을 읽어봤습니다.
책의 전반적인 내용은 어렵지 않습니다. 왜냐하면 내용이 깊게 들어가지 않고 말그대로 설계를 하기 때문에 생각보다 읽는데는 쉽다고 느껴졌습니다.
깊게 들어가면 어렵겠지만 책에서는 아주 깊게 들어가지는 않은 것 같아요.
책의 챕터는 12장 정도로 돼어 있으며, 챕터마다 설계해야 하는 서비스가 다릅니다.
책의 내용은 가상 면접을 하는 것처럼 면접관이 프로젝트에 대해 설계를 요청하면, 면접자는 해당 프로젝트의 서비스의 목적과 규모 등에 맞게 질문과 답변을 하는 방식입니다."><meta property="og:type" content="article"><meta property="og:url" content="https://haservi.github.io/posts/books/large-scale-system-design-learned-from-virtual-interviews/"><meta property="og:image" content="https://haservi.github.io/images/cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-02T22:28:29+09:00"><meta property="article:modified_time" content="2023-12-02T22:28:29+09:00"><meta property="og:site_name" content="Halog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://haservi.github.io/images/cover.png"><meta name=twitter:title content="가상 면접 사례로 배우는 대규모 시스템 설계 기초를 읽고"><meta name=twitter:description content="대규모 시스템 설계를 해본적이 없으니.. 궁금해서 해당 책을 읽어봤습니다.
책의 전반적인 내용은 어렵지 않습니다. 왜냐하면 내용이 깊게 들어가지 않고 말그대로 설계를 하기 때문에 생각보다 읽는데는 쉽다고 느껴졌습니다.
깊게 들어가면 어렵겠지만 책에서는 아주 깊게 들어가지는 않은 것 같아요.
책의 챕터는 12장 정도로 돼어 있으며, 챕터마다 설계해야 하는 서비스가 다릅니다.
책의 내용은 가상 면접을 하는 것처럼 면접관이 프로젝트에 대해 설계를 요청하면, 면접자는 해당 프로젝트의 서비스의 목적과 규모 등에 맞게 질문과 답변을 하는 방식입니다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://haservi.github.io/posts/"},{"@type":"ListItem","position":2,"name":"가상 면접 사례로 배우는 대규모 시스템 설계 기초를 읽고","item":"https://haservi.github.io/posts/books/large-scale-system-design-learned-from-virtual-interviews/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"가상 면접 사례로 배우는 대규모 시스템 설계 기초를 읽고","name":"가상 면접 사례로 배우는 대규모 시스템 설계 기초를 읽고","description":"대규모 시스템 설계를 해본적이 없으니.. 궁금해서 해당 책을 읽어봤습니다.\n책의 전반적인 내용은 어렵지 않습니다. 왜냐하면 내용이 깊게 들어가지 않고 말그대로 설계를 하기 때문에 생각보다 읽는데는 쉽다고 느껴졌습니다.\n깊게 들어가면 어렵겠지만 책에서는 아주 깊게 들어가지는 않은 것 같아요.\n책의 챕터는 12장 정도로 돼어 있으며, 챕터마다 설계해야 하는 서비스가 다릅니다.\n책의 내용은 가상 면접을 하는 것처럼 면접관이 프로젝트에 대해 설계를 요청하면, 면접자는 해당 프로젝트의 서비스의 목적과 규모 등에 맞게 질문과 답변을 하는 방식입니다.","keywords":["",""],"articleBody":"대규모 시스템 설계를 해본적이 없으니.. 궁금해서 해당 책을 읽어봤습니다.\n책의 전반적인 내용은 어렵지 않습니다. 왜냐하면 내용이 깊게 들어가지 않고 말그대로 설계를 하기 때문에 생각보다 읽는데는 쉽다고 느껴졌습니다.\n깊게 들어가면 어렵겠지만 책에서는 아주 깊게 들어가지는 않은 것 같아요.\n책의 챕터는 12장 정도로 돼어 있으며, 챕터마다 설계해야 하는 서비스가 다릅니다.\n책의 내용은 가상 면접을 하는 것처럼 면접관이 프로젝트에 대해 설계를 요청하면, 면접자는 해당 프로젝트의 서비스의 목적과 규모 등에 맞게 질문과 답변을 하는 방식입니다.\n책을 읽으면서 인상적인 몇몇 키워드 및 조금 더 알아봐야 겠다고 정리한 것은 아래의 항목입니다.\nDB 데이터 다중화와 샤딩(안정 해시를 통한 키 재배치 방법) API 처리율 제한(Dos 공격 및 자원 방지, 비용 절감, 서버 과부하 방지) Redis 효율적으로 사용하기(선착순 이벤트, SNS 좋아요, 방문자 수 count 등) AWS S3 업로드 시 이어올리기 및 데이터 압축 등으로 비용 감소 메시지 큐를 이용하여 컴포넌트 사이의 결합도 낮추기 검색어 자동완성 구조 및 원리 트라이 자료구조에 대해서 서비스될 프로젝트의 사용자 유입량 계산 서비스될 프로젝트의 하드웨어 스팩 계산 이중 몇가지는 실제로 구현(API 처리율 제한, AWS S3, 메시지 큐 등) 해봤지만.. 어디선가 한번쯤 들어봤는데 제대로 모르는 샤딩에 대해 정리했습니다.\n실제로 써보진 않았지만 써야할 때가 되면 그래도 도움이 되지 않을까라는 생각으로 찾아보다보니 쓸 일이 있을까라는 생각도 드네요.. 그래도 알아두면 좋을 것 같아 정리했습니다.\n데이터 다중화와 샤딩 서비스가 점점 커지면 데이터베이스를 증설이 필요할 때가 있습니다. 이럴 때 데이터 다중화와 샤딩은 대규모 데이터베이스 시스템에서 성능 및 확장성을 향상시킬 수 있습니다.\n데이터 다중화는 동일한 데이터를 여러 위치에 중복 저장하는 것을 의미합니다. 이는 데이터의 가용성을 향상시키고 장애 시 복구를 용이하게 합니다.\n데이터 다중화(Data Replication)\n장점\n고가용성(High Availability): 복제된 데이터는 여러 노드에 분산되어 있기 때문에 하나의 노드가 다운되더라도 다른 노드에서 데이터를 제공할 수 있습니다. 읽기 성능 향상: 복제된 노드 중 하나를 읽기 전용으로 사용하여 읽기 성능을 향상시킬 수 있습니다. 단점\n쓰기 지연성(Write Latency): 모든 복제본을 일관되게 유지하려면 쓰기 작업이 모든 복제본에 반영되어야 하므로 쓰기 지연이 발생할 수 있습니다. 일관성 유지 어려움: 여러 복제본 간의 일관성을 유지하기 위해 복잡한 동기화 및 복제 알고리즘이 필요합니다. 샤딩(Sharding)\n샤딩은 대량의 데이터를 분할하여 샤드(shard)라고 불리는 작은 단위로 분할하는 기술을 의미합니다. 각 샤드는 고유한 데이터 서브셋을 관리하며, 모든 샤드의 조합이 전체 데이터 세트를 형성합니다. 샤딩 전략을 쓸 때는 샤딩 키를 어떻게 분산할지가 중요하다고 합니다.\n여러 데이터베이스에 골고루 데이터를 분산하기 위해 안정 해시 기법을 이용하여 해당 문제를 해결할 수 있습니다.\n이외에도 유명인사(celebrity) 문제로 여러 유명인사가 특정 샤드에 집중되어 있으면 해당 샤드에서만 데이터의 과부하가 걸릴 수 있습니다.\n장점\n수평 확장성(Horizontal Scalability): 데이터베이스의 용량을 늘리려면 단순히 더 많은 샤드를 추가하면 됩니다. 높은 읽기 및 쓰기 처리량: 각 샤드는 독립적으로 작동하므로 동시에 여러 샤드에서 읽기 및 쓰기 작업이 가능합니다. 단점\n쿼리 복잡성: 데이터가 여러 샤드에 분산되어 있기 때문에 쿼리가 여러 샤드에서 실행되어야 하는 경우 데이터를 조합하는 추가적인 작업이 필요할 수 있습니다. 일부 샤드 다운 영향: 특정 샤드에 장애가 발생하면 해당 샤드에 속한 데이터에 액세스하는 부분에서 문제가 발생할 수 있습니다. 참조\n내가 만든 서비스는 얼마나 많은 사용자가 이용할 수 있을까?(시리즈) 샤딩(Sharding) / 샤드(Shard) - DB의 수평적 규모 확장 DB 분산 저장 기법(파티셔닝,샤딩,레플리케이션)의 개념 ","wordCount":"469","inLanguage":"ko","image":"https://haservi.github.io/images/cover.png","datePublished":"2023-12-02T22:28:29+09:00","dateModified":"2023-12-02T22:28:29+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://haservi.github.io/posts/books/large-scale-system-design-learned-from-virtual-interviews/"},"publisher":{"@type":"Organization","name":"Halog","logo":{"@type":"ImageObject","url":"https://haservi.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://haservi.github.io/ accesskey=h title="Halog (Alt + H)">Halog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://haservi.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://haservi.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://haservi.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://haservi.github.io/>홈</a>&nbsp;»&nbsp;<a href=https://haservi.github.io/posts/>Posts</a></div><h1 class=post-title>가상 면접 사례로 배우는 대규모 시스템 설계 기초를 읽고</h1><div class=post-meta><span title='2023-12-02 22:28:29 +0900 +0900'>12월 2, 2023</span>&nbsp;·&nbsp;3 분</div></header><figure class=entry-cover><img loading=lazy srcset="https://haservi.github.io/posts/books/large-scale-system-design-learned-from-virtual-interviews/images/cover_hu245351c9caaa2520512f41f689fa83dc_167942_360x0_resize_box_3.png 360w ,https://haservi.github.io/posts/books/large-scale-system-design-learned-from-virtual-interviews/images/cover_hu245351c9caaa2520512f41f689fa83dc_167942_480x0_resize_box_3.png 480w ,https://haservi.github.io/posts/books/large-scale-system-design-learned-from-virtual-interviews/images/cover_hu245351c9caaa2520512f41f689fa83dc_167942_720x0_resize_box_3.png 720w ,https://haservi.github.io/posts/books/large-scale-system-design-learned-from-virtual-interviews/images/cover.png 912w" sizes="(min-width: 768px) 720px, 100vw" src=https://haservi.github.io/posts/books/large-scale-system-design-learned-from-virtual-interviews/images/cover.png alt width=912 height=441><p><text></p></figure><div class=post-content><p>대규모 시스템 설계를 해본적이 없으니.. 궁금해서 해당 책을 읽어봤습니다.</p><p>책의 전반적인 내용은 어렵지 않습니다. 왜냐하면 내용이 깊게 들어가지 않고 말그대로 설계를 하기 때문에 생각보다 읽는데는 쉽다고 느껴졌습니다.</p><p>깊게 들어가면 어렵겠지만 책에서는 아주 깊게 들어가지는 않은 것 같아요.</p><p>책의 챕터는 12장 정도로 돼어 있으며, 챕터마다 설계해야 하는 서비스가 다릅니다.<br>책의 내용은 가상 면접을 하는 것처럼 면접관이 프로젝트에 대해 설계를 요청하면, 면접자는 해당 프로젝트의 서비스의 목적과 규모 등에 맞게 질문과 답변을 하는 방식입니다.</p><p>책을 읽으면서 인상적인 몇몇 키워드 및 조금 더 알아봐야 겠다고 정리한 것은 아래의 항목입니다.</p><ul><li>DB 데이터 다중화와 샤딩(안정 해시를 통한 키 재배치 방법)</li><li>API 처리율 제한(Dos 공격 및 자원 방지, 비용 절감, 서버 과부하 방지)</li><li>Redis 효율적으로 사용하기(선착순 이벤트, SNS 좋아요, 방문자 수 count 등)</li><li>AWS S3 업로드 시 이어올리기 및 데이터 압축 등으로 비용 감소</li><li>메시지 큐를 이용하여 컴포넌트 사이의 결합도 낮추기</li><li>검색어 자동완성 구조 및 원리</li><li>트라이 자료구조에 대해서</li><li>서비스될 프로젝트의 사용자 유입량 계산</li><li>서비스될 프로젝트의 하드웨어 스팩 계산</li></ul><p>이중 몇가지는 실제로 구현(API 처리율 제한, AWS S3, 메시지 큐 등) 해봤지만.. 어디선가 한번쯤 들어봤는데 제대로 모르는 <strong>샤딩</strong>에 대해 정리했습니다.</p><p>실제로 써보진 않았지만 써야할 때가 되면 그래도 도움이 되지 않을까라는 생각으로 찾아보다보니 쓸 일이 있을까라는 생각도 드네요.. 그래도 알아두면
좋을 것 같아 정리했습니다.</p><h2 id=데이터-다중화와-샤딩>데이터 다중화와 샤딩<a hidden class=anchor aria-hidden=true href=#데이터-다중화와-샤딩>#</a></h2><p>서비스가 점점 커지면 데이터베이스를 증설이 필요할 때가 있습니다. 이럴 때 데이터 다중화와 샤딩은 대규모 데이터베이스 시스템에서 성능 및 확장성을 향상시킬 수 있습니다.</p><p>데이터 다중화는 동일한 데이터를 여러 위치에 중복 저장하는 것을 의미합니다. 이는 데이터의 가용성을 향상시키고 장애 시 복구를 용이하게 합니다.</p><ol><li><p>데이터 다중화(Data Replication)</p><p>장점</p><ul><li>고가용성(High Availability): 복제된 데이터는 여러 노드에 분산되어 있기 때문에 하나의 노드가 다운되더라도 다른 노드에서 데이터를 제공할 수 있습니다.</li><li>읽기 성능 향상: 복제된 노드 중 하나를 읽기 전용으로 사용하여 읽기 성능을 향상시킬 수 있습니다.</li></ul><p>단점</p><ul><li>쓰기 지연성(Write Latency): 모든 복제본을 일관되게 유지하려면 쓰기 작업이 모든 복제본에 반영되어야 하므로 쓰기 지연이 발생할 수 있습니다.</li><li>일관성 유지 어려움: 여러 복제본 간의 일관성을 유지하기 위해 복잡한 동기화 및 복제 알고리즘이 필요합니다.</li></ul></li><li><p>샤딩(Sharding)</p><p>샤딩은 대량의 데이터를 분할하여 샤드(shard)라고 불리는 작은 단위로 분할하는 기술을 의미합니다.
각 샤드는 고유한 데이터 서브셋을 관리하며, 모든 샤드의 조합이 전체 데이터 세트를 형성합니다.
샤딩 전략을 쓸 때는 샤딩 키를 어떻게 분산할지가 중요하다고 합니다.<br>여러 데이터베이스에 골고루 데이터를 분산하기 위해 <strong>안정 해시 기법</strong>을 이용하여 해당 문제를 해결할 수 있습니다.<br>이외에도 유명인사(celebrity) 문제로 여러 유명인사가 특정 샤드에 집중되어 있으면 해당 샤드에서만 데이터의 과부하가 걸릴 수 있습니다.</p><p>장점</p><ul><li>수평 확장성(Horizontal Scalability): 데이터베이스의 용량을 늘리려면 단순히 더 많은 샤드를 추가하면 됩니다.</li><li>높은 읽기 및 쓰기 처리량: 각 샤드는 독립적으로 작동하므로 동시에 여러 샤드에서 읽기 및 쓰기 작업이 가능합니다.</li></ul><p>단점</p><ul><li>쿼리 복잡성: 데이터가 여러 샤드에 분산되어 있기 때문에 쿼리가 여러 샤드에서 실행되어야 하는 경우 데이터를 조합하는 추가적인 작업이 필요할 수 있습니다.</li><li>일부 샤드 다운 영향: 특정 샤드에 장애가 발생하면 해당 샤드에 속한 데이터에 액세스하는 부분에서 문제가 발생할 수 있습니다.</li></ul></li></ol><p>참조</p><ul><li><a href=https://hyuntaeknote.tistory.com/10>내가 만든 서비스는 얼마나 많은 사용자가 이용할 수 있을까?(시리즈)</a></li><li><a href=https://trillium.tistory.com/128>샤딩(Sharding) / 샤드(Shard) - DB의 수평적 규모 확장</a></li><li><a href=https://spiderwebcoding.tistory.com/14>DB 분산 저장 기법(파티셔닝,샤딩,레플리케이션)의 개념</a></li></ul></div><footer class=post-footer><ul class=post-tags></ul></footer><section class=comments><script>loadComment();function loadComment(){document.body.className.includes("dark")?theme="photon-dark":theme="boxy-light";let e=document.createElement("script");e.src="https://utteranc.es/client.js",e.setAttribute("repo","haservi/haservi.github.io"),e.setAttribute("issue-term","pathname"),e.setAttribute("theme",theme),e.setAttribute("crossorigin","anonymous"),e.setAttribute("async",""),document.querySelector("section.comments").innerHTML="",document.querySelector("section.comments").appendChild(e)}</script></section></article></main><footer class=footer><span>&copy; 2023 <a href=https://haservi.github.io/>Halog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script>const images=Array.from(document.querySelectorAll(".post-content img"));images.forEach(e=>{mediumZoom(e,{margin:0,background:"#1d1e20",scrollOffset:40,container:null,template:null})})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark")),loadComment()})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="복사";function s(){t.innerHTML="복사 완료!",setTimeout(()=>{t.innerHTML="복사"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>