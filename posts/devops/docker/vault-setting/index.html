<!doctype html><html lang=ko dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>HashiCorp Vault 알아보기 | Halog</title>
<meta name=keywords content="HashiCorp,Vault,Mac,Docker"><meta name=description content="HashiCorp Vault를 Mac 환경에서 Docker를 이용하여 설치하고 초기화하는 방법을 단계별로 알아봅니다."><meta name=author content><link rel=canonical href=https://haservi.github.io/posts/devops/docker/vault-setting/><meta name=google-site-verification content="G-MXZP81P04W"><link rel=stylesheet as=style crossorigin href=https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.6/dist/web/static/pretendard.css><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://haservi.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://haservi.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://haservi.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://haservi.github.io/apple-touch-icon.png><link rel=mask-icon href=https://haservi.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=ko href=https://haservi.github.io/posts/devops/docker/vault-setting/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1400973749140762" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-RP5NDCM8J9"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-RP5NDCM8J9")}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://haservi.github.io/ accesskey=h title="Halog (Alt + H)">Halog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://haservi.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://haservi.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://haservi.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://haservi.github.io/>홈</a>&nbsp;»&nbsp;<a href=https://haservi.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">HashiCorp Vault 알아보기</h1><div class=post-meta><span title='2025-11-19 20:13:25 +0900 +0900'>11월 19, 2025</span>&nbsp;·&nbsp;4 분</div></header><figure class=entry-cover><img loading=eager srcset='https://haservi.github.io/posts/devops/docker/vault-setting/images/cover_hu4351693f508a44ba5cd2791ca0aeac60_1830263_360x0_resize_box_3.png 360w,https://haservi.github.io/posts/devops/docker/vault-setting/images/cover_hu4351693f508a44ba5cd2791ca0aeac60_1830263_480x0_resize_box_3.png 480w,https://haservi.github.io/posts/devops/docker/vault-setting/images/cover_hu4351693f508a44ba5cd2791ca0aeac60_1830263_720x0_resize_box_3.png 720w,https://haservi.github.io/posts/devops/docker/vault-setting/images/cover_hu4351693f508a44ba5cd2791ca0aeac60_1830263_1080x0_resize_box_3.png 1080w,https://haservi.github.io/posts/devops/docker/vault-setting/images/cover_hu4351693f508a44ba5cd2791ca0aeac60_1830263_1500x0_resize_box_3.png 1500w,https://haservi.github.io/posts/devops/docker/vault-setting/images/cover.png 1536w' src=https://haservi.github.io/posts/devops/docker/vault-setting/images/cover.png sizes="(min-width: 768px) 720px, 100vw" width=1536 height=1024 alt><figcaption><text></figcaption></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>목차</span></summary><div class=inner><ul><li><a href=#hashicorp-vault%eb%9e%80 aria-label="HashiCorp Vault란?">HashiCorp Vault란?</a><ul><li><a href=#vault%ec%9d%98-%ec%a3%bc%ec%9a%94-%ed%8a%b9%ec%a7%95 aria-label="Vault의 주요 특징">Vault의 주요 특징</a></li></ul></li><li><a href=#docker%eb%a1%9c-vault-%ec%84%a4%ec%b9%98%ed%95%98%ea%b8%b0 aria-label="Docker로 Vault 설치하기">Docker로 Vault 설치하기</a><ul><li><a href=#1-docker-compose-%ed%8c%8c%ec%9d%bc-%ec%9e%91%ec%84%b1 aria-label="1. Docker Compose 파일 작성">1. Docker Compose 파일 작성</a></li><li><a href=#2-vault-%ec%84%a4%ec%a0%95-%ed%8c%8c%ec%9d%bc-%ec%9e%91%ec%84%b1 aria-label="2. Vault 설정 파일 작성">2. Vault 설정 파일 작성</a></li><li><a href=#3-vault-%ec%bb%a8%ed%85%8c%ec%9d%b4%eb%84%88-%ec%8b%a4%ed%96%89 aria-label="3. Vault 컨테이너 실행">3. Vault 컨테이너 실행</a></li></ul></li><li><a href=#vault-%ec%b4%88%ea%b8%b0%ed%99%94-%eb%b0%8f-%ec%84%a4%ec%a0%95 aria-label="Vault 초기화 및 설정">Vault 초기화 및 설정</a><ul><li><a href=#1-vault-%ec%b4%88%ea%b8%b0%ed%99%94-operator-init aria-label="1. Vault 초기화 (Operator Init)">1. Vault 초기화 (Operator Init)</a></li><li><a href=#2-vault-unseal-%ed%95%98%ea%b8%b0 aria-label="2. Vault Unseal 하기">2. Vault Unseal 하기</a></li><li><a href=#3-vault-%eb%a1%9c%ea%b7%b8%ec%9d%b8 aria-label="3. Vault 로그인">3. Vault 로그인</a></li></ul></li><li><a href=#%ec%9b%b9-ui%ec%97%90%ec%84%9c-%ec%8b%9c%ed%81%ac%eb%a6%bf-%ea%b4%80%eb%a6%ac%ed%95%98%ea%b8%b0 aria-label="웹 UI에서 시크릿 관리하기">웹 UI에서 시크릿 관리하기</a><ul><li><a href=#1-secret-engine-%ed%99%95%ec%9d%b8 aria-label="1. Secret Engine 확인">1. Secret Engine 확인</a></li><li><a href=#2-%ec%8b%9c%ed%81%ac%eb%a6%bf-%ec%83%9d%ec%84%b1%ed%95%98%ea%b8%b0 aria-label="2. 시크릿 생성하기">2. 시크릿 생성하기</a></li><li><a href=#3-%ec%8b%9c%ed%81%ac%eb%a6%bf-%ec%a1%b0%ed%9a%8c-%eb%b0%8f-%ea%b4%80%eb%a6%ac aria-label="3. 시크릿 조회 및 관리">3. 시크릿 조회 및 관리</a></li><li><a href=#4-postman%ec%9c%bc%eb%a1%9c-%ec%8b%9c%ed%81%ac%eb%a6%bf-%ec%a1%b0%ed%9a%8c%ed%95%98%ea%b8%b0 aria-label="4. Postman으로 시크릿 조회하기">4. Postman으로 시크릿 조회하기</a></li></ul></li></ul></div></details></div><div class=post-content><p>개발을 하다 보면 API 키, 데이터베이스 비밀번호, 인증서 등 민감한 정보를 안전하게 관리해야 할 필요성을 느낄 때가 있습니다.</p><p>오래전에 <code>스프링 마이크로서비스 코딩 공작소</code> 도서를 스터디하면서 알게 된 HashiCorp Vault를 실습 해보겠습니다.</p><h2 id=hashicorp-vault란>HashiCorp Vault란?<a hidden class=anchor aria-hidden=true href=#hashicorp-vault란>#</a></h2><p>HashiCorp Vault는 비밀 정보(secrets)를 안전하게 저장하고 접근을 제어하는 오픈소스 도구입니다.</p><p>API 키, 비밀번호, 인증서, 토큰 등의 민감한 정보를 중앙에서 관리할 수 있으며, 동적으로 비밀 정보를 생성하거나 암호화 서비스를 제공하는 등 다양한 기능을 제공합니다.</p><h3 id=vault의-주요-특징>Vault의 주요 특징<a hidden class=anchor aria-hidden=true href=#vault의-주요-특징>#</a></h3><ul><li><strong>비밀 정보 중앙 관리</strong>: 모든 민감한 정보를 한 곳에서 안전하게 관리</li><li><strong>동적 비밀 정보 생성</strong>: 필요할 때마다 임시 자격증명을 생성하여 보안 강화</li><li><strong>데이터 암호화</strong>: 저장 데이터와 전송 데이터 모두 암호화</li><li><strong>접근 제어</strong>: 세밀한 권한 관리 및 감사 로그</li><li><strong>다양한 인증 방법</strong>: Token, LDAP, AWS, Kubernetes 등 다양한 인증 백엔드 지원</li></ul><p>최근 마이크로서비스 아키텍처와 클라우드 네이티브 환경이 확산되면서, 분산된 시스템에서 비밀 정보를 안전하게 관리하는 것이 더욱 중요해졌습니다. Vault는 이러한 요구사항을 충족시키는 강력한 솔루션입니다.</p><p>그렇지만 본인의 서비스에 맞게 아키텍처를 선택하고, 기술 또한 개발 기간과 필요 여부로 적절히 선택하는게 좋습니다. 오히려 유지보수의 어려움과 복잡성만 높일 수도 있으니까요.</p><p>이번 글에서는 Vault를 Docker Compose로 설치한 후 초기화하고 시크릿을 생성하는 과정을 알아보겠습니다.</p><p>도커로 진행하기 때문에 딱히 운영체제(Window, Mac)는 고민할 필요가 없습니다.</p><h2 id=docker로-vault-설치하기>Docker로 Vault 설치하기<a hidden class=anchor aria-hidden=true href=#docker로-vault-설치하기>#</a></h2><p>docker-compose를 이용하여 Vault 서버를 생성합니다.</p><h3 id=1-docker-compose-파일-작성>1. Docker Compose 파일 작성<a hidden class=anchor aria-hidden=true href=#1-docker-compose-파일-작성>#</a></h3><p><code>docker-compose.yml</code> 파일을 생성합니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3.8&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>vault</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>hashicorp/vault:1.20</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>vault</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;8200:8200&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cap_add</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>IPC_LOCK</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./config:/vault/config:ro</span><span class=w> </span><span class=c># 설정 파일</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./file:/vault/file</span><span class=w> </span><span class=c># 데이터 저장소</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./logs:/vault/logs</span><span class=w> </span><span class=c># 로그 파일</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>VAULT_ADDR</span><span class=p>:</span><span class=w> </span><span class=l>http://0.0.0.0:8200</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>VAULT_LOG_LEVEL</span><span class=p>:</span><span class=w> </span><span class=l>info</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;vault&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;server&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;-config=/vault/config&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>healthcheck</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>test</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;CMD&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;vault&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;status&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=l>10s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class=l>3s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>retries</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=2-vault-설정-파일-작성>2. Vault 설정 파일 작성<a hidden class=anchor aria-hidden=true href=#2-vault-설정-파일-작성>#</a></h3><p><code>docker-compose.yml</code> 파일과 동일한 디렉토리에 <code>config</code> 폴더를 생성합니다.</p><p><code>config/vault.hcl</code> 파일을 생성합니다. 아래는 해당 파일 내용입니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># UI 웹 인터페이스 활성화</span>
</span></span><span class=line><span class=cl><span class=nv>ui</span> <span class=o>=</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 메모리 잠금 비활성화 (Docker 환경에서 권장)</span>
</span></span><span class=line><span class=cl><span class=nv>disable_mlock</span> <span class=o>=</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 스토리지 백엔드: 파일 시스템 사용</span>
</span></span><span class=line><span class=cl>storage <span class=s2>&#34;file&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nv>path</span> <span class=o>=</span> <span class=s2>&#34;/vault/file&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 네트워크 리스너: HTTP 연결 설정</span>
</span></span><span class=line><span class=cl>listener <span class=s2>&#34;tcp&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nv>address</span>     <span class=o>=</span> <span class=s2>&#34;0.0.0.0:8200&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nv>tls_disable</span> <span class=o>=</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># API 주소</span>
</span></span><span class=line><span class=cl><span class=nv>api_addr</span> <span class=o>=</span> <span class=s2>&#34;http://0.0.0.0:8200&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 토큰/시크릿 유효 기간</span>
</span></span><span class=line><span class=cl><span class=nv>max_lease_ttl</span> <span class=o>=</span> <span class=s2>&#34;10h&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>default_lease_ttl</span> <span class=o>=</span> <span class=s2>&#34;10h&#34;</span>
</span></span></code></pre></td></tr></table></div></div><style type=text/css>.notice{--root-color:#000;--root-background:#e7f2fa;--title-color:#fff;--title-background:#6ab0de;--warning-title:rgba(217, 83, 79, 0.9);--warning-content:#fae2e2;--info-title:#f0b37e;--info-content:#fff2db;--note-title:#6ab0de;--note-content:#e7f2fa;--tip-title:rgba(92, 184, 92, 0.8);--tip-content:#e6f9e6}body.dark .notice{--root-color:#fff;--root-background:#e7f2fa;--title-color:#fff;--title-background:#6ab0de;--warning-title:rgba(130, 49, 47, 0.9);--warning-content:#341312;--info-title:#906B4B;--info-content:#392A1E;--note-title:#3f6985;--note-content:#192A35;--tip-title:rgba(46, 92, 46, 0.8);--tip-content:#122412}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style><div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379.0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628.0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628.0l-22.627 22.627c-6.248 6.248-6.248 16.379.0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405.0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346 7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373.0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884.0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937.0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154.0l239.94 416.028zM288 354c-25.405.0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346 7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373.0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884.0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196.0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627.0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627.0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627.0 12 5.373 12 12v1e2h12c6.627.0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice warning"><p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"/></svg></span>경고</p><p>위 설정은 개발 환경용입니다. 운영 환경에서는 TLS를 활성화하고 적절한 보안 설정을 적용해야 합니다.</p></div><h3 id=3-vault-컨테이너-실행>3. Vault 컨테이너 실행<a hidden class=anchor aria-hidden=true href=#3-vault-컨테이너-실행>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker-compose up -d
</span></span></code></pre></td></tr></table></div></div><p>컨테이너가 정상적으로 실행되면 브라우저에서 <code>http://localhost:8200</code>로 접속하여 Vault UI를 확인할 수 있습니다.</p><p><img alt="Vault UI 초기 화면" loading=lazy src=/posts/devops/docker/vault-setting/images/image100.png#center></p><h2 id=vault-초기화-및-설정>Vault 초기화 및 설정<a hidden class=anchor aria-hidden=true href=#vault-초기화-및-설정>#</a></h2><h3 id=1-vault-초기화-operator-init>1. Vault 초기화 (Operator Init)<a hidden class=anchor aria-hidden=true href=#1-vault-초기화-operator-init>#</a></h3><p>Vault를 처음 실행하면 초기화 과정이 필요합니다. 초기화 시 아래와 같이 Unseal Key와 Initial Root Token을 발급 받습니다.</p><ul><li><strong>Unseal Keys</strong>: Vault를 unsealing하는 데 사용되는 키</li><li><strong>Initial Root Token</strong>: Vault에 접근할 수 있는 최초 루트 토큰</li></ul><p>아래와 같이 입력하면 도커로 실행된 컨테이너에 접속하여 vault의 unseal키와 Root 토큰을 발급 받을 수 있습니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker <span class=nb>exec</span> vault vault operator init -key-shares<span class=o>=</span><span class=m>5</span> -key-threshold<span class=o>=</span><span class=m>3</span> <span class=p>|</span> tee vault-keys.txt
</span></span></code></pre></td></tr></table></div></div><p>초기화가 완료되면 5개의 Unseal Key와 1개의 Root Token이 생성됩니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Unseal Key 1: ********************************************
</span></span><span class=line><span class=cl>Unseal Key 2: ********************************************
</span></span><span class=line><span class=cl>Unseal Key 3: ********************************************
</span></span><span class=line><span class=cl>Unseal Key 4: ********************************************
</span></span><span class=line><span class=cl>Unseal Key 5: ********************************************
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Initial Root Token: hvs.**********************************
</span></span></code></pre></td></tr></table></div></div><div class="notice info"><p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"/></svg></span>알림</p><p>해당 값은 매우 중요하므로 안전한 곳에 보관해야 합니다.<br>분실 시 Vault에 접근할 수 없게 됩니다.</p></div><h3 id=2-vault-unseal-하기>2. Vault Unseal 하기<a hidden class=anchor aria-hidden=true href=#2-vault-unseal-하기>#</a></h3><p>Vault는 보안을 위해 시작할 때마다 Sealed(봉인) 상태로 시작됩니다. Vault를 사용하려면 Unseal 과정을 거쳐야 합니다.</p><p>위 설정에서는 5개의 키 중 최소 3개의 키를 입력해야 Unseal이 완료됩니다. 이는 <strong>샤미르의 비밀 공유(Shamir&rsquo;s Secret Sharing, SSS)</strong> 알고리즘을 기반으로 하며, 하나의 비밀을 여러 조각으로 나누어 분배하는 암호화 방식입니다.</p><p>여러 사람이 키를 나눠 가지고 있어도 임계값(threshold) 이상이 모여야만 Vault를 열 수 있도록 보안성을 강화한 것입니다.</p><p><img alt="Vault Unseal 과정" loading=lazy src=/posts/devops/docker/vault-setting/images/image101.png#center></p><p>위에서 발급 받은 Unseal Key 중 아무거나 3개를 순차적으로 입력하면 됩니다.</p><h3 id=3-vault-로그인>3. Vault 로그인<a hidden class=anchor aria-hidden=true href=#3-vault-로그인>#</a></h3><p>Unseal 후 Root Token으로 로그인합니다.</p><p><img alt="Vault Login" loading=lazy src=/posts/devops/docker/vault-setting/images/image102.png#center></p><p>웹 UI에서 Method를 &ldquo;Token"으로 선택하고 Initial Root Token을 입력합니다.</p><p><img alt="Vault Login" loading=lazy src=/posts/devops/docker/vault-setting/images/image05.png#center></p><p>그럼 위와 같이 메인화면에 접근할 수 있습니다.</p><h2 id=웹-ui에서-시크릿-관리하기>웹 UI에서 시크릿 관리하기<a hidden class=anchor aria-hidden=true href=#웹-ui에서-시크릿-관리하기>#</a></h2><p>Vault에 로그인하면 웹 UI를 통해 비밀 정보를 저장하고 관리할 수 있습니다.</p><h3 id=1-secret-engine-확인>1. Secret Engine 확인<a hidden class=anchor aria-hidden=true href=#1-secret-engine-확인>#</a></h3><p>로그인 후 좌측 메뉴에서 &ldquo;Secrets"를 선택하면 사용 가능한 Secret Engine 목록을 볼 수 있습니다.</p><p>기본적으로 <code>secret/</code> 경로에 KV(Key-Value) v2 엔진이 활성화되어 있습니다.</p><p><img alt="Vault Secrets 메뉴" loading=lazy src=/posts/devops/docker/vault-setting/images/image103.png#center></p><h3 id=2-시크릿-생성하기>2. 시크릿 생성하기<a hidden class=anchor aria-hidden=true href=#2-시크릿-생성하기>#</a></h3><ol><li><code>secret/</code> 경로를 클릭합니다.</li><li>우측 상단의 &ldquo;Create secret&rdquo; 버튼을 클릭합니다.</li><li><strong>Path</strong>에 시크릿의 경로를 입력합니다. (예: <code>database/config</code>)</li><li>Key-Value 쌍으로 비밀 정보를 입력합니다.<ul><li>Key: <code>username</code>, Value: <code>admin</code></li><li>Key: <code>password</code>, Value: <code>mySecretPassword123</code></li><li>Key: <code>host</code>, Value: <code>localhost</code></li><li>Key: <code>port</code>, Value: <code>5432</code></li></ul></li><li>&ldquo;Save&rdquo; 버튼을 클릭합니다.</li></ol><p><img alt="Vault Secret 생성" loading=lazy src=/posts/devops/docker/vault-setting/images/image104.png#center></p><p><img alt=image loading=lazy src=/posts/devops/docker/vault-setting/images/image105.png#center></p><p><img alt=image loading=lazy src=/posts/devops/docker/vault-setting/images/image106.png#center></p><h3 id=3-시크릿-조회-및-관리>3. 시크릿 조회 및 관리<a hidden class=anchor aria-hidden=true href=#3-시크릿-조회-및-관리>#</a></h3><p>생성한 시크릿을 클릭하면 저장된 정보를 확인할 수 있습니다. 각 값 옆의 눈 아이콘을 클릭하면 실제 값이 표시됩니다.</p><p>시크릿을 수정하거나 삭제할 수도 있으며, KV v2는 버전 관리를 지원하므로 이전 버전의 데이터도 확인할 수 있습니다.</p><p><img alt=image loading=lazy src=/posts/devops/docker/vault-setting/images/image107.png#center></p><h3 id=4-postman으로-시크릿-조회하기>4. Postman으로 시크릿 조회하기<a hidden class=anchor aria-hidden=true href=#4-postman으로-시크릿-조회하기>#</a></h3><p>스프링 클라우드를 이용해도 시크릿에 접근할 수 있지만, 간단하게 Postman으로 조회하는 방법을 알아보겠습니다.</p><p>아래와 같이 시크릿을 만든 경우 API Endpoint 경로를 웹 사이트에서 확인할 수 있으며, Postman으로 조회도 할 수 잇습니다.</p><div class="notice warning"><p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"/></svg></span>경고</p><p>Root Token을 직접 사용하는 것은 보안상 좋지 않습니다.</p><p>운영 환경에서는 반드시 AppRole, AWS IAM, Kubernetes Service Account 등의 인증 방법을 사용하고, Policy를 통해 최소 권한 원칙을 적용해야 합니다.</p></div><p><img alt=image loading=lazy src=/posts/devops/docker/vault-setting/images/image108.png#center></p><p><img alt=image loading=lazy src=/posts/devops/docker/vault-setting/images/image109.png#center></p><p>이번 글에서는 Docker를 이용하여 HashiCorp Vault를 설치하고 기본적인 키를 만들어보고 실제로 값을 읽어오는 것을 해봤습니다.</p><p>아무래도 규모가 큰 여러 백엔드 서비스에서 비밀 정보들을 Vault로 관리하면 어쩌면 좋을수.. 있을 것 같네요.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://haservi.github.io/tags/hashicorp/>HashiCorp</a></li><li><a href=https://haservi.github.io/tags/vault/>Vault</a></li><li><a href=https://haservi.github.io/tags/mac/>Mac</a></li><li><a href=https://haservi.github.io/tags/docker/>Docker</a></li></ul><nav class=paginav><a class=prev href=https://haservi.github.io/posts/tips/how-to-use-ohmyposh/><span class=title>« 이전 페이지</span><br><span>Windows 터미널에 Oh My Posh 설치하기</span>
</a><a class=next href=https://haservi.github.io/posts/tools/how-to-better-display/><span class=title>다음 페이지 »</span><br><span>Mac에서 Better Display 모니터 해상도 개선하는 방법</span></a></nav></footer><section class=comments><script>loadComment();function loadComment(){document.body.className.includes("dark")?theme="photon-dark":theme="boxy-light";let e=document.createElement("script");e.src="https://utteranc.es/client.js",e.setAttribute("repo","haservi/haservi.github.io"),e.setAttribute("issue-term","pathname"),e.setAttribute("theme",theme),e.setAttribute("crossorigin","anonymous"),e.setAttribute("async",""),document.querySelector("section.comments").innerHTML="",document.querySelector("section.comments").appendChild(e)}</script></section></article></main><footer class=footer><span>&copy; 2025 <a href=https://haservi.github.io/>Halog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".post-content img"));images.forEach(e=>{mediumZoom(e,{margin:0,background:"#1d1e20",scrollOffset:40,container:null,template:null})})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark")),loadComment()})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="복사";function s(){t.innerHTML="복사 완료!",setTimeout(()=>{t.innerHTML="복사"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>